class "Банковские реквизиты получателя пособия";

import classes Константы;


inclass public

  --@doc Конструктор: cоздание объекта по записи заявления
  func СоздатьПоЗаписиЗаявления (локЗаявление: Документы.Первичные.Заявление) :  Документы.БанкРеквизитыПолучателя;
    Result = inherited Create;
    Result.ПоляПоЗаписиЗаявления(локЗаявление);
  end;

inobject public

func Заявление : Документы.Первичные.Заявление;
  return _Заявление;
end;

func Субъект : Базовый.Данные.Субъект;
  return _Субъект;
end;

func БанкРеквизиты : Документы.Первичные.Получатель.БанкРеквизиты;
  return _БанкРеквизиты;
end;

func БанкНаим : string;
  return _БанкНаим;
end;

func СчетПолучателя : string;
  return _СчетПолучателя;
end;

func БИК : string;
  return _БИК;
end;

func НомерКарты : string;
  return _НомерКарты;
end;



inobject private

_Заявление : Документы.Первичные.Заявление;
_Субъект : Базовый.Данные.Субъект;
_БанкРеквизиты : Документы.Первичные.Получатель.БанкРеквизиты;
_БанкНаим : string;
_СчетПолучателя : string;
_БИК : string;
_НомерКарты : string;

  proc ПоляПоЗаписиЗаявления(локЗаявление: Документы.Первичные.Заявление);
   _Заявление = локЗаявление;
   _Субъект = локЗаявление.Субъект;
   _БанкРеквизиты = ПолучитьЗаписьБанкРекв(локЗаявление);
   if (_БанкРеквизиты <> nil) :
     _БанкНаим = _БанкРеквизиты.БанкНаим;
     _СчетПолучателя = _БанкРеквизиты.СчетПолучателя;
     _БИК = _БанкРеквизиты.БИК;
     _НомерКарты = _БанкРеквизиты.НомерКарты;
   fi;
  end;

  func ПолучитьЗаписьБанкРекв(локЗаявление: Документы.Первичные.Заявление) : Документы.Первичные.Получатель.БанкРеквизиты;
    var локФильтр : string;
      Result = nil;
      локФильтр = 'Заявление =' + Str(локЗаявление);
      Result = СИС2.ФункцииДокумента.QueryLastRecord(Документы.Первичные.Получатель.БанкРеквизиты, локФильтр);
  end;



end