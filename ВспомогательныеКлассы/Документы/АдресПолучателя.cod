class "Адрес получателя пособия";

import classes Константы;
import Базовый classes Константы;

inclass public

  --@doc Конструктор: cоздание объекта по записи Адрес
  func СоздатьПоЗаписи (локАдрес : Базовый.Справочники.Адрес)  : Документы.АдресПолучателя;
    Result = inherited Create;
    Result.ПоляПоЗаписи(локАдрес);
  end;

inobject public

func Заявление : Документы.Первичные.Заявление;
  return _Заявление;
end;

func ПолучательПособия : Базовый.Данные.Субъект;
  return _ПолучательПособия;
end;

func ТипАдреса : integer;
  return _ТипАдреса;
end;

func Адрес : Базовый.Справочники.Адрес;
  return _Адрес;
end;

func Индекс : string;
  --return _Индекс;
end;

func Регион : string;
  --return _Регион;
end;

func Район : string;
  --return _Район;
end;

func НасПункт : string;
  --return _НасПункт;
end;

func Улица : string;
  --return _Улица;
end;

func Дом : string;
  --return _Дом;
end;

func Корпус : string;
  --return _Корпус;
end;

func Строение : string;
  --return _Строение;
end;

func Квартира : string;
  --return _Квартира;
end;

proc ЗаполнитьПоУмолчанию;

end;

proc УдалитьЗаписьАдреса;
  if (_Адрес <> nil) :
    _Адрес.Delete;
  fi;
end;

inobject private

_Адрес : Базовый.Справочники.Адрес;
_Заявление : Документы.Первичные.Заявление;
_ПолучательПособия : Базовый.Данные.Субъект;
_ТипАдреса : integer;


  proc ПоляПоЗаписи (локАдрес : Базовый.Справочники.Адрес);
   _Адрес = локАдрес;
   _Заявление = _Адрес.Заявление;
   _ПолучательПособия = _Адрес.ПолучательПособия;
   --_ТипАдреса = локТипАдреса;

  end;

  func ПолучитьЗаписьАдреса(локЗаявление: Документы.Первичные.Заявление;
                            локТипАдреса : integer)  : Документы.Первичные.Получатель.Адрес;
    var aTxt[], локФильтр : string;
      aTxt[1] = 'Заявление =' + Str(локЗаявление);
      aTxt[2] = 'ТипАдреса =' + Str(локТипАдреса);
      локФильтр = СИС2.СтроковыеФункции.СложитьСтрокиФильтраПоИ(aTxt);
      Result = СИС2.ФункцииДокумента.QueryLastRecord(Документы.Первичные.Получатель.Адрес, локФильтр);
  end;



end