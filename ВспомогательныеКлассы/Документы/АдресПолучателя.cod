class "Адрес получателя пособия";

import classes Константы;


inclass public

  --@doc Конструктор: cоздание объекта по записи заявления
  func СоздатьПоЗаписиЗаявленияИТипу (локЗаявление: Документы.Первичные.Заявление;
                                 локТипАдреса : integer)  : Документы.АдресПолучателя;
    Result = inherited Create;
    Result.ПоляПоЗаписиЗаявленияИТипу(локЗаявление,локТипАдреса);
  end;

inobject public

func Заявление : Документы.Первичные.Заявление;
  return _Заявление;
end;

func Субъект : Базовый.Данные.Субъект;
  return _Субъект;
end;

func ТипАдреса : integer;
  return _ТипАдреса;
end;

func Адрес : Документы.Первичные.Получатель.Адрес;
  return _Адрес;
end;

func Индекс : string;
  return _Индекс;
end;

func Регион : string;
  return _Регион;
end;

func Район : string;
  return _Район;
end;

func НасПункт : string;
  return _НасПункт;
end;

func Улица : string;
  return _Улица;
end;

func Дом : string;
  return _Дом;
end;

func Корпус : string;
  return _Корпус;
end;

func Строение : string;
  return _Строение;
end;

func Квартира : string;
  return _Квартира;
end;

proc ЗаполнитьПоУмолчанию;

end;

proc УдалитьЗаписьАдреса;
  if (_Адрес <> nil) :
    _Адрес.Delete;
  fi;
end;

inobject private

_Заявление : Документы.Первичные.Заявление;
_Субъект : Базовый.Данные.Субъект;
_ТипАдреса : integer;
_Адрес : Документы.Первичные.Получатель.Адрес;
_Индекс : string;
_Регион : string;
_Район : string;
_НасПункт : string;
_Улица : string;
_Дом : string;
_Корпус : string;
_Строение : string;
_Квартира : string;


  proc ПоляПоЗаписиЗаявленияИТипу(локЗаявление: Документы.Первичные.Заявление; локТипАдреса : integer);
   _Заявление = локЗаявление;
   _Субъект = локЗаявление.Субъект;
   _ТипАдреса = локТипАдреса;
   _Адрес = ПолучитьЗаписьАдреса(локЗаявление,локТипАдреса);
   if (_Адрес <> nil) :
     _Индекс = _Адрес.Индекс;
     _Регион = _Адрес.Регион;
     _Район = _Адрес.Район;
     _НасПункт = _Адрес.НасПункт;
     _Улица = _Адрес.Улица;
     _Дом = _Адрес.Дом;
     _Корпус = _Адрес.Корпус;
     _Строение = _Адрес.Строение;
     _Квартира = _Адрес.Квартира;
   fi;

  end;

  func ПолучитьЗаписьАдреса(локЗаявление: Документы.Первичные.Заявление;
                            локТипАдреса : integer)  : Документы.Первичные.Получатель.Адрес;
    var aTxt[], локФильтр : string;
      aTxt[1] = 'Заявление =' + Str(локЗаявление);
      aTxt[2] = 'ТипАдреса =' + Str(локТипАдреса);
      локФильтр = СИС2.СтроковыеФункции.СложитьСтрокиФильтраПоИ(aTxt);
      Result = СИС2.ФункцииДокумента.QueryLastRecord(Документы.Первичные.Получатель.Адрес, локФильтр);
  end;



end