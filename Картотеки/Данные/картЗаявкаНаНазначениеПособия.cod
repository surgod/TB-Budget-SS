class inherited ТББ_Базовый.Базовые.картДокумент "Заявки на назначение пособий";

import classes Константы;

--{{ Свойства
inclass private

  var ПолеСтолбцаНаше: String:= 'НашеУчреждение.Имя';
  var КлассИнтерфейса: Class МашинаРеквизитов.Базовые.интЗапись = Данные.интЗаявкаНаНазначениеПособия;
--}}


--------------------------------------------------------------------------------
--{ Обработчики событий картотеки
inobject private

  func картотека_ПриСозданииЗаписи (var locRecord: Данные.ЗаявкаНаНазначениеПособия): Logical;
    var локВсеНашиУчреждения: Базовый.Данные.Субъект[];
    var локНашеУчреждение: Базовый.Данные.Субъект;
    var локЗаявка : Данные.ЗаявкаНаНазначениеПособия;
    if (НашеУчреждение = nil): -- определение учреждения документа и возможности выбора учреждения
      локВсеНашиУчреждения = ТББ_Базовый.Библио.ВсеНашиУчреждения;
      if (LengthOfArray(локВсеНашиУчреждения) = 1):
        локНашеУчреждение = локВсеНашиУчреждения[1];
      else
        if (CmOk <> ТББ_Базовый.Библио.ВыборНашегоУчреждения(локНашеУчреждение)):
          Return;
        fi;
      fi;
    else
      локНашеУчреждение = НашеУчреждение;
    fi;
    if (локНашеУчреждение <> nil) :
      if (CmOk = Служебные.блНоваяЗаявкаНаНазначениеПособия.OpenForm(локНашеУчреждение,локЗаявка)):
        Данные.интЗаявкаНаНазначениеПособия.БланкРедакторПоУмолчанию.ShowFormEx(локЗаявка);--OpenBlankEditor('Рабочие.редНазначениеПособия', локНазначениеПособия, Window.ChildWindow);
      fi;
    fi;
  end;
--}

end