extends Бюджет_ЗПиДД.Справочники.картВидыСтраховогоОбеспечения "";


inclass public

--{{ Конструкторы, визуализаторы

  func ВыполнитьВыбор (var локРезультатВыбора: Бюджет_ЗПиДД.Справочники.ВидыСтраховогоОбеспечения; локФильтр: string = nil; локФрагмент: string = nil; локТолькоВыбор: logical = true): Integer;
    var locForm: Бюджет_ЗПиДД.Справочники.картВидыСтраховогоОбеспечения;
    locForm = Бюджет_ЗПиДД.Справочники.картВидыСтраховогоОбеспечения.Create;
    locForm.УстановитьФрагментНаим(локФрагмент);
    locForm.УстановитьТолькоВыбор(локТолькоВыбор);
    if CmOk = locForm.ShowEx(локРезультатВыбора, локФильтр, Kernel.Window.ModalWindow):
      Return CmOk;
    fi;
  end;
--}}

inobject private

  var ТолькоВыбор: logical; -- разрешен только выбор записи, вне зависимости от положения селектора

inobject public

--{{ Вспомогательные классы
  proc УстановитьФрагментНаим (локНаим: string);
    ФрагментНаим = локНаим;
  end;

  proc УстановитьЗаголовокОкна;
    if ТолькоВыбор:
      Self.Window.Caption = Self.ClassInfo.Description + ' (только выбор)';
    else
      Self.Window.Caption = Self.ClassInfo.Description;
    fi;
  end;

  proc УстановитьТолькоВыбор (locValue: logical);
    ТолькоВыбор = locValue;
  end;

  --@doc Процедура устанавливает возможные действия в картотеке
  proc ДоступностьКоманд;
    Запретить_Удаление = ТолькоВыбор;
    Запретить_Добавление = ТолькоВыбор;
    Запретить_Дублирование = ТолькоВыбор;
    Запретить_ДобавлениеГрупп = ТолькоВыбор;
    Запретить_Преобразование = ТолькоВыбор;
  end;

--}}

--{{ Обработчики событий шаблона
  proc шаблон_ПриОткрытии (Create: Logical);
    ДоступностьКоманд;
    extended шаблон_ПриОткрытии(Create);
    УстановитьЗаголовокОкна;
  end;
--}}

end