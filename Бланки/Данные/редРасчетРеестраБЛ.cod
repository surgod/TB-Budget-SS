class inherited —»—2.ЅазовыйЅланк–едактор "–едактор расчета реестра ЅЋ", editor ƒанные.–асчет–еестраЅЋ;

import classes  онстанты,‘ункцииѕрименени€ остант;--,‘ункцииƒанных;


--{{ —войства


inobject public

var »м€ѕол€ : string;
var ѕризнак«авершени€ : logical;

--}}

inclass public

func —оздатьѕо»мениѕол€ (лок»м€ѕол€ : string;
                         локѕризнак«авершени€ : logical) : ƒанные.ред–асчет–еестраЅЋ;
  Result = ƒанные.ред–асчет–еестраЅЋ.Create;
  Result.»м€ѕол€ = лок»м€ѕол€;
  Result.ѕризнак«авершени€ = локѕризнак«авершени€;
end;

func ѕоказатьћодально synonym ShowModal(лок–асчет : ƒанные.–асчет–еестраЅЋ;
                                        лок»м€ѕол€ : string;
                                        локѕризнак«авершени€ : logical) : integer;
  var locForm : ƒанные.ред–асчет–еестраЅЋ;
    locForm = —оздатьѕо»мениѕол€(лок»м€ѕол€,локѕризнак«авершени€);
    if cmOk = locForm.ShowEx(лок–асчет, Kernel.Window.ModalWindow):
      Return cmOk;
    fi;
end;


inobject private

--фреймы

var фрейм‘орма : TemplateFrame;
var фрейм—таж : TemplateFrame;
var фрейм“рудƒог6ћес : TemplateFrame;
var фрейм”слови€»счисл : TemplateFrame;
var фреймѕериодыѕросто€ : TemplateFrame;
var фреймѕериодќплаты : TemplateFrame;
var фрейм–асчеты : TemplateFrame;
var фрейм»на€»нформаци€ : TemplateFrame;


--имена полей редактора за€вки, которые редактируютс€ в фреймефрейм—таж

var »менаƒл€‘рейма—таж[] : string = ['—таж_–еестр'];
var »менаƒл€‘рейма“рудƒог6ћес[] : string = ['“рудƒогƒо_6_ћес€цев_–еестр'];
var »менаƒл€‘рейма”слови€»счисл[] : string = ['”слови€»счислени€_–еестр'];
var »менаƒл€‘реймаѕериодыѕросто€[] : string = ['ѕериодыѕросто€_–еестр'];
var »менаƒл€‘реймаѕериодќплаты[] : string = ['ѕериодќпаты_–еестр'];
var »менаƒл€‘рейма–асчеты[] : string = ['–асчетныйѕериод_–еестр','—редний«аработок_–еестр'];
var »менаƒл€‘рейма»на€»нформаци€[] : string = ['Ќеполна€—тавка_–еестр','»на€»нформаци€_–еестр'];


--------------------------------------------------------------------------------
--{ ќбработчики событий бланка

proc шаблон_ѕриќткрытии(Create :Logical);
 inherited шаблон_ѕриќткрытии(Create);
 ¬ид‘ормы;
end;

func ѕолеѕериодыѕросто€_ѕриЌажатии(Cell:TemplateCell; Action : Template.ClickTypes) : Logical;
  var locRow : integer;
    Result = false;
    if (Cell.Contents = '+') :
      Self.Record.ѕериодыѕросто€.Add;
    elsif (Cell.Contents = 'x') :
      locRow = Cell.Row;
      Self.Record.ѕериодыѕросто€.Delete(locRow);
    fi;
end;



--}

--{ ¬спомогательные методы

proc ¬ид‘ормы;
  Template.BeginModify;
    фрейм‘орма.ShowTabs = false;
    if (»м€ѕол€ in »менаƒл€‘рейма—таж) :
      Template.CurrentFrame = фрейм—таж;
    elsif (»м€ѕол€ in »менаƒл€‘рейма“рудƒог6ћес) :
      Template.CurrentFrame = фрейм“рудƒог6ћес;
    elsif (»м€ѕол€ in »менаƒл€‘рейма”слови€»счисл) :
      Template.CurrentFrame = фрейм”слови€»счисл;
    elsif (»м€ѕол€ in »менаƒл€‘реймаѕериодыѕросто€) :
      Template.CurrentFrame = фреймѕериодыѕросто€;
    elsif (»м€ѕол€ in »менаƒл€‘реймаѕериодќплаты) :
      Template.CurrentFrame = фреймѕериодќплаты;
    elsif (»м€ѕол€ in »менаƒл€‘рейма–асчеты) :
      Template.CurrentFrame = фрейм–асчеты;
    elsif (»м€ѕол€ in »менаƒл€‘рейма»на€»нформаци€) :
      Template.CurrentFrame = фрейм»на€»нформаци€;
    fi;
  Template.EndModify;
end;


end