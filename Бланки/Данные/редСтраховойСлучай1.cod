class inherited ћашина–еквизитов.Ѕазовые.бл–едактор—»нтерфейсом "–едактор страхового случа€", editor ƒанные.—траховой—лучай;

import classes  онстанты,‘ункцииѕрименени€ остант,‘ункцииЁлементовƒанных;

inobject public

  var »нтерфейс: ƒанные.инт—траховой—лучай;



inobject private

type “ипы–ежима¬ыводаЌаЁкран = (тип–ежим—трах—луч = 0,тип–ежимѕолуч,тип–ежимѕособ,тип–ежимЅанк,тип–ежим«а€вка) ;
var –ежим¬ыводаЌаЁкран : integer;


--фреймы

var фрейм‘орма : TemplateFrame;
var фрейм—трах—лучай : TemplateFrame;
var фреймѕолучатель : TemplateFrame;
var фреймѕособи€ : TemplateFrame;
var фреймЅанк–еквизиты : TemplateFrame;

--var »м€“ипа—трах—луча€ : string = »м€—трах—лучай(“ип—трах—луча€);

--------------------------------------------------------------------------------
--{ ќбработчики событий бланка

proc шаблон_ѕри—оздании(Context :Variant);
  inherited шаблон_ѕри—оздании(Context);
end;

proc шаблон_ѕри—читывании;
  inherited шаблон_ѕри—читывании;
  –ежим¬ыводаЌаЁкран = тип–ежим—трах—луч;
  ¬ид‘ормы;
end;

func ѕоле—трах—луч_ѕри¬ыводе (Cell: TemplateCell; Value: Variant; Action: Template.OutputTypes; var Format: String): Variant;
  var ss : string;
    if (Cell.Contents = 'Ќаимѕериода—трах—луч'):
      if (“ип—трах—луча€ = “ип—трах—лучай¬ремЌетруд)  :
        return 'ѕериод нетрудоспособности с';
      elsif (“ип—трах—луча€ = “ип—трах—лучайЅерем)  :
        return 'ѕериод нетрудоспособности с';
      fi;
    elsif (Cell.Contents = '»м€“ипа—трах—луча€'):
      ss = »м€—трах—лучай(“ип—трах—луча€);
      return ss;
    fi;
end;

proc кнѕолучатель_ѕриЌажатии (Sender: Button);
  EditorPost;
  ƒанные.–едѕолучательѕособи€.ѕоказатьƒл€—трах—лучай(Self.Record);
end;

proc кнЅанк_ѕриЌажатии (Sender: Button);
  EditorPost;
  ƒанные.–едЅанк–еквизиты.ѕоказатьƒл€—трах—лучай(Self.Record);
end;


--}
--{ ¬спомогательные методы
proc ¬ид‘ормы;
  Template.BeginModify;
    if (–ежим¬ыводаЌаЁкран = тип–ежим—трах—луч) :
      Ќарисоватьќсновные—ведени€;
      Template.CurrentFrame = фрейм—трах—лучай;
    elsif (–ежим¬ыводаЌаЁкран = тип–ежимѕолуч) :
      Ќарисоватьѕолучател€;
    elsif (–ежим¬ыводаЌаЁкран = тип–ежимѕособ) :
      Ќарисоватьѕособи€;
    elsif (–ежим¬ыводаЌаЁкран = тип–ежим«а€вка) :
      Ќарисовать«а€вку;
    fi;
    фрейм‘орма.ShowTabs = false;
    --‘реймыЌаЁкран;
     нопкиЌаЁкран;
  Template.EndModify;
end;

--proc ‘реймыЌаЁкран;
--  фрейм‘орма.ShowTabs = false;

--end;


proc  нопкиЌаЁкран;
end;

proc Ќарисоватьќсновные—ведени€;
  var лок—екц : TemplateSection;
  var locRow1,locRow2 : TemplateRow;
    лок—екц = —екци€ѕо»мени("секц»м€——",фрейм—трах—лучай);
    locRow1 = —трока—екцииѕо»мени(лок—екц,'стр»м€——_ред');
    locRow2 = —трока—екцииѕо»мени(лок—екц,'стр»м€——_неред');
    if (“ип—трах—луча€ = “ип—трах—лучай»ное) :
      locRow1.Visible = true;
      locRow2.Visible = false;
    else
      locRow1.Visible = false;
      locRow2.Visible = true;
    fi;
    лок—екц = —екци€ѕо»мени("секцѕериодЅол——",фрейм—трах—лучай);
    if (“ип—трах—луча€ = “ип—трах—лучай¬ремЌетруд) :
      лок—екц.Visible = true;
    elsif (“ип—трах—луча€ = “ип—трах—лучайЅерем) :
      лок—екц.Visible = true;
    else
      лок—екц.Visible = false;
    fi;
    лок—екц = —екци€ѕо»мени("секц–еб——",фрейм—трах—лучай);
    if (“ип—трах—луча€ = “ип—трах—лучай–ебƒо1_5) :
      лок—екц.Visible = true;
      лок—екц.Row[2].Visible = true;
    elsif (“ип—трах—луча€ = “ип—трах—лучай–ожд) :
      лок—екц.Visible = true;
      лок—екц.Row[2].Visible = false;
    else
      лок—екц.Visible = false;
    fi;
    лок—екц = —екци€ѕо»мени("секц—лучай——",фрейм—трах—лучай);
    if (“ип—трах—луча€ = “ип—трах—лучай»ное) :
      лок—екц.Visible = true;
    else
      лок—екц.Visible = false;
    fi;
end;

proc Ќарисоватьѕолучател€;
  
end;


proc Ќарисоватьѕособи€;
  
end;

proc Ќарисовать«а€вку;
  
end;



--}

func ѕоле_ѕри¬ыводе_«аголовокќкна‘ормы (Cell: TemplateCell; Value: Variant; Action: Template.OutputTypes; var Format: String): String;
  var aTxt: string[];
  with —»—2.—троковые‘ункции  do
    aTxt[1] = MarkInGray(Ќаше”чреждение.Ќаим);
    aTxt[2] = '—траховой слу€ай '+ »м€;
    aTxt[3] = MarkInGray(—убъект.»м€);
    Return ћассив—трок¬“екст(aTxt);
  end;
end;



end