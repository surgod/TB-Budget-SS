Class inherited СИС2.БазовыйБланкРедактор "Пользовательская настройка фидов страхового обеспечения" , editor Настройки.Справочники.ВидыСтраховогоОбеспечения;

import classes Константы;

  -- 2_Конструкторы, визуализаторы0. --


  inclass public

func ПоказатьМодально synonym ShowModal(локВСО : Бюджет_ЗПиДД.Справочники.ВидыСтраховогоОбеспечения): integer;
  var locRecord: Настройки.Справочники.ВидыСтраховогоОбеспечения;
    locRecord = ПолучитьЗаписьНастройки(локВСО);
    if cmOk = Настройки.Справочники.ВСО.редНастройкиПользвателя.ShowFormEx(locRecord, Kernel.Window.ModalWindow):
      Return cmOk;
    fi;
end;

func ПрочитатьНастройку (локВСО : Бюджет_ЗПиДД.Справочники.ВидыСтраховогоОбеспечения) : integer;
  var locRecord: Настройки.Справочники.ВидыСтраховогоОбеспечения;
  var локФильтр : string;
    Result = локВСО.ВидРасчетовС_ФСС;
    локФильтр = 'ВидСтраховогоОбеспечения=' + Str(локВСО);
    locRecord = СИС2.ФункцииДокумента.QueryLastRecord(Настройки.Справочники.ВидыСтраховогоОбеспечения,локФильтр);
    if (locRecord <> nil) :
      if (locRecord.ВидРасчетовС_ФСС <> ВидРасчетовС_ФСС_Нет) :
        return locRecord.ВидРасчетовС_ФСС;
      fi;
    fi;
end;


  inclass private


func ПолучитьЗаписьНастройки (локВСО : Бюджет_ЗПиДД.Справочники.ВидыСтраховогоОбеспечения) : Настройки.Справочники.ВидыСтраховогоОбеспечения;
  var локФильтр : string;
    локФильтр = 'ВидСтраховогоОбеспечения=' + Str(локВСО);
    Result = СИС2.ФункцииДокумента.QueryLastRecord(Настройки.Справочники.ВидыСтраховогоОбеспечения,локФильтр);
    if (Result = nil):
      Result = Настройки.Справочники.ВидыСтраховогоОбеспечения.Create;
      Result.ВидСтраховогоОбеспечения = локВСО;
    fi;
end;

  inobject private

var фреймГлавное : TemplateFrame;


--{{ Обработчики событий шаблона

  proc шаблон_ПриСоздании(Context :Variant);
    inherited шаблон_ПриСоздании(Context);
    ОбновитьСписокПоля(фреймГлавное.CellByField['ВидРасчетовС_ФСС'], ВидыРасчетовС_ФСС, 1, 2);
  end;

--}}

  func Поле_ПриВыводе_ЗаголовокОкнаФормы (Cell: TemplateCell; Value: Variant; Action: Template.OutputTypes; var Format: String): String;
    with СИС2.СтроковыеФункции  do
      return MarkInGray('Настройка вида расчетов с ФСС для конкретного вида пособия');
    end;
  end;
end