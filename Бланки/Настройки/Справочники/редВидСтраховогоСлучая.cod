class inherited СИС2.БазовыйБланкРедактор "Пользовательская настройка вида страхового случая", editor Настройки.Справочники.ВидСтраховогоСлучая;

import classes Константы;

  -- 2_Конструкторы, визуализаторы0. --


  inclass public

func ПоказатьМодально synonym ShowModal(локВидСС : Справочники.ВидСтраховогоСлучая): integer;
  var locRecord: Настройки.Справочники.ВидСтраховогоСлучая;
    locRecord = ПолучитьЗаписьНастройки(локВидСС);
    if cmOk = Настройки.Справочники.редВидСтраховогоСлучая.ShowFormEx(locRecord, Kernel.Window.ModalWindow):
      Return cmOk;
    fi;
end;

func ПрочитатьНастройку (локВидСС : Справочники.ВидСтраховогоСлучая) : integer;
  var locRecord: Настройки.Справочники.ВидСтраховогоСлучая;
  var локФильтр : string;
    Result = локВидСС.ВидРасчетовС_ФСС;
    локФильтр = 'ВидСтраховогоСлучая=' + Str(локВидСС);
    locRecord = СИС2.ФункцииДокумента.QueryLastRecord(Настройки.Справочники.ВидСтраховогоСлучая,локФильтр);
    if (locRecord <> nil) :
      if (locRecord.ВидРасчетовС_ФСС <> ВидРасчетовС_ФСС_Нет) :
        return locRecord.ВидРасчетовС_ФСС;
      fi;
    fi;
end;


  inclass private


func ПолучитьЗаписьНастройки (локВидСС : Справочники.ВидСтраховогоСлучая) : Настройки.Справочники.ВидСтраховогоСлучая;
  var локФильтр : string;
    локФильтр = 'ВидСтраховогоСлучая=' + Str(локВидСС);
    Result = СИС2.ФункцииДокумента.QueryLastRecord(Настройки.Справочники.ВидСтраховогоСлучая,локФильтр);
    if (Result = nil):
      Result = Настройки.Справочники.ВидСтраховогоСлучая.Create;
      Result.ВидСтраховогоСлучая = локВидСС;
    fi;
end;


  inobject private

var фреймГлавное : TemplateFrame;


--{{ Обработчики событий шаблона

  proc шаблон_ПриСоздании(Context :Variant);
    inherited шаблон_ПриСоздании(Context);
    ОбновитьСписокПоля(фреймГлавное.CellByField['ВидРасчетовС_ФСС'], ВидыРасчетовС_ФСС, 1, 2);
  end;

--}}

  func Поле_ПриВыводе_ЗаголовокОкнаФормы (Cell: TemplateCell; Value: Variant; Action: Template.OutputTypes; var Format: String): String;
    with СИС2.СтроковыеФункции  do
      return MarkInGray('Настройка вида расчетов с ФСС для конкретного вида пособия');
    end;
  end;

end